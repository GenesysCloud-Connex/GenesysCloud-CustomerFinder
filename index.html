<!-- <html>
  <head>
    <script type="text/javascript" charset="utf-8">
      (function (g, e, n, es, ys) {
        g["_genesysJs"] = e;
        g[e] =
          g[e] ||
          function () {
            (g[e].q = g[e].q || []).push(arguments);
          };
        g[e].t = 1 * new Date();
        g[e].c = es;
        ys = document.createElement("script");
        ys.async = 1;
        ys.src = n;
        ys.charset = "utf-8";
        document.head.appendChild(ys);
      })(
        window,
        "Genesys",
        "https://apps.cac1.pure.cloud/genesys-bootstrap/genesys.min.js",
        {
          environment: "cac1",
          deploymentId: "d9b7830b-5826-4829-9b0d-075e858c8801",
        }
      );
    </script>
    <script type="text/javascript" charset="utf-8">
      Genesys("subscribe", "Launcher.ready" , function(o){
        console.log("The queue works!");
      });
        Genesys("command", "Database.set", {
      messaging: {
        customAttributes: {
          EmailAddress : "vtieu@connexcare.com"
        }
      }
    });
    </script>
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="https://sdk-cdn.mypurecloud.com/javascript/latest/purecloud-platform-client-v2.min.js"></script>
    <script>
      // Implicit grant credentials
      const clientId = "4eb23f0e-0a17-48dc-ac88-13a44cc82134";
      const redirectUri =
        "https://genesyscloud-connex.github.io/GenesysCloud-CustomerFinder/";

      // Set Genesys Cloud objects
      const platformClient = require("platformClient");
      const client = platformClient.ApiClient.instance;
      const externalContactsApi = new platformClient.ExternalContactsApi();
      let emailAdd = "";
      let firstName = "";

      client.setEnvironment("cac1.pure.cloud");
      client.setPersistSettings(true, "test_app");

      function submitBtn() {
        $("form").on("submit", function (e) {
          e.preventDefault();
          let dataString = $(this).serialize();
          emailAdd = document.getElementById("email").value;
          console.log(emailAdd);

          client.loginImplicitGrant(clientId, redirectUri).then(() => {
            console.log("Logged in");
            externalContactsApi
              .getExternalcontactsReversewhitepageslookup(emailAdd, {})
              .then((data) => {
                firstName = data.contacts[0].firstName;
                console.log(firstName);
                return firstName;
              });
              return firstName
          });
          return firstName, emailAdd
        });
        console.log(firstName)
        console.log(emailAdd)
        return firstName, emailAdd;
      }
    </script>
  </head>
  <body>
    <div id="contact-form">
      <form action="" class="form">
        <label for="email">Email Address:</label><br />
        <input
          type="text"
          id="email"
          name="email"
          placeholder="sample@address.com"
        /><br />
        <input
          type="submit"
          name="submit"
          value="Submit"
          onclick="submitBtn()"
          id="btn"
        />
      </form>
    </div>
    <div id="greeting"></div>
  </body>
</html> -->

<html>
  <head>
    <script type="text/javascript" charset="utf-8">
      (function (g, e, n, es, ys) {
        g["_genesysJs"] = e;
        g[e] =
          g[e] ||
          function () {
            (g[e].q = g[e].q || []).push(arguments);
          };
        g[e].t = 1 * new Date();
        g[e].c = es;
        ys = document.createElement("script");
        ys.async = 1;
        ys.src = n;
        ys.charset = "utf-8";
        document.head.appendChild(ys);
      })(
        window,
        "Genesys",
        "https://apps.cac1.pure.cloud/genesys-bootstrap/genesys.min.js",
        {
          environment: "cac1",
          deploymentId: "d9b7830b-5826-4829-9b0d-075e858c8801",
        }
      );
    </script>

    <script type="text/javascript" charset="utf-8">
      // Implicit grant credentials
      const clientId = "4eb23f0e-0a17-48dc-ac88-13a44cc82134";
      const redirectUri =
        "https://genesyscloud-connex.github.io/GenesysCloud-CustomerFinder/";

      // Set Genesys Cloud objects
      const platformClient = require("platformClient");
      const client = platformClient.ApiClient.instance;
      const externalContactsApi = new platformClient.ExternalContactsApi();
      let emailAdd = "";
      let firstName = "";

      client.setEnvironment("cac1.pure.cloud");
      client.setPersistSettings(true, "test_app");
      client.loginImplicitGrant(clientId, redirectUri).then(() => {
        console.log("Logged in");
        externalContactsApi
          .getExternalcontactsReversewhitepageslookup(emailAdd, {})
          .then((data) => {
            firstName = data.contacts[0].firstName;
            // console.log(firstName);
            return firstName;
          });
        return firstName;
      });
      console.log(firstName)
      Genesys("subscribe", "Launcher.ready", function (o) {
        console.log("The queue works!");
      });
      Genesys("command", "Database.set", {
        messaging: {
          customAttributes: {
            EmailAddress: "vtieu@connexcare.com",
          },
        },
      });
    </script>
  </head>
  <body>
    testxxxxxxbf
  </body>
</html>
